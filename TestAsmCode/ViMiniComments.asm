LI R0 0 // R0: 上个按键
LI R1 0 // R1: 当前按键
LI R2 0 // R2: 当前光标位置
LI R3 0 // R3: 当前列号
LI R4 9
SLL R4 R4 0
ADDIU R4 60   // R4 = 0x960
SUBU R4 R2 R5 // R4 = R2? 是否还要继续清屏
BEQZ R5 8 // 清屏结束，跳至18行
NOP
LI R5 BF
SLL R5 R5 0
SW R5 R1 2
SW R5 R2 3
ADDIU R2 1
B 7F7
NOP // 清屏一步结束
LI R2 0 // 光标回到左上角
LI R5 BF
SLL R5 R5 0
SW R5 R2 5
MOVE R0 R1	// 当前->上个		// GETCHAR
LI R5 BF
SLL R5 R5 0
LW R5 R1 4 // 读当前字符
SUBU R0 R1 R5 // R0=R1?
BEQZ R5 FA		// 一样时跳	-> GETCHAR
NOP
BEQZ R1 F8		// 为0时跳	-> GETCHAR
NOP
LI R5 60			// VISIABLE
SLTU R1 R5          // R1<31: T=1
BTEQZ E				// 不可见 跳转-> BKSP
NOP
LI R4 4F
CMP R3 R4
BTEQZ EF // GETCHAR
NOP
ADDIU R3 1
LI R5 BF 
SLL R5 R5 0
SW R5 R1 2
SW R5 R2 3
ADDIU R2 1
SW R5 R2 5
B 7E7				->GETCHAR
NOP
LI R5 60			// bksp
SUBU R5 R1 R5       // 当前按键是bksp?
BNEZ R5 E			-> nEXT line 55
NOP
LI R4 0
CMP R3 R4
BTEQZ E0
NOP
ADDIU R3 FF
LI R5 BF
SLL R5 R5 0
ADDIU R2 FF // 先退光标
SW R5 R2 5
SW R5 R1 2 
SW R5 R2 3
B 7D6				-> GETCHAR
NOP
LI R5 69 // delete
SUBU R5 R1 R5
BNEZ R5 3 // NEXT
NOP
B 7BB // 清屏
NOP
LI R5 68 // ESC
SUBU R5 R1 R5
BNEZ R5 3
NOP
B 10 // QUIT
NOP
LI R5 61 // ENTER
SUBU R5 R1 R5
BNEZ R5 A // NEXT
NOP
LI R4 50
SUBU R4 R3 R4
ADDU R2 R4 R2
LI R3 0
LI R5 BF
SLL R5 R5 0
SW R5 R2 5
B 7BD
NOP
B 7BB				-> GETCHAR
NOP
JR R7
NOP
